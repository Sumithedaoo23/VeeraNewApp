<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Warrior: Smart Dustbin Challenge</title>
    <style>
        /* General Setup */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #80deea 100%);
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        h1 {
            color: #00796b;
            margin-bottom: 5px;
            font-size: 2.2em;
        }

        p.subtitle {
            margin-bottom: 25px;
            font-size: 1.1em;
            color: #004d40;
        }

        /* Game Container */
        .game-container {
            width: 90%;
            max-width: 900px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Top Navigation */
        .top-nav {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: clamp(8px, 2vw, 12px);
            z-index: 20;
        }

        .top-nav img {
            width: clamp(36px, 8vw, 42px);
            height: clamp(36px, 8vw, 42px);
            cursor: pointer;
            transition: all 0.3s ease;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
            border-radius: 50%;
            padding: 6px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .top-nav img:hover {
            transform: scale(1.12);
            background: rgba(255, 255, 255, 0.35);
            filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.25));
        }

        .top-nav img:active {
            transform: scale(0.98);
        }


        /* Top Panel - Score & Settings */
        .top-panel {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 10px 0;
            border-bottom: 2px dashed #b2dfdb;
        }

        .score-board,
        .control-settings {
            width: 48%;
            padding: 15px;
            border-radius: 10px;
            background-color: #e0f2f1;
            box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.1);
        }

        .score-board h3,
        .control-settings h3 {
            color: #00796b;
            margin-bottom: 10px;
            border-bottom: 1px solid #b2dfdb;
            padding-bottom: 5px;
        }

        #eco-status {
            font-weight: bold;
            font-size: 1.1em;
            color: #d84315;
            /* Default status color */
        }

        #threshold-value {
            color: #00796b;
            font-weight: bold;
        }

        /* Threshold Slider (Ultrasonic Sensor Simulation) */
        .slider-group {
            margin-top: 10px;
        }

        #threshold-slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #bdbdbd;
            outline: none;
            transition: opacity .2s;
            cursor: pointer;
        }

        /* Middle Section - Conveyor & Bins */
        .game-area {
            position: relative;
            height: 250px;
            overflow: hidden;
            border: 5px solid #4db6ac;
            border-radius: 10px;
            background-color: #f5f5f5;
        }

        /* Waste Item Styling */
        .waste-item {
            position: absolute;
            top: 120px;
            right: -50px;
            /* Start off-screen */
            width: 40px;
            height: 40px;
            border-radius: 5px;
            text-align: center;
            line-height: 40px;
            font-size: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: transform 0.1s ease;
        }

        /* Bin Area */
        .bins-area {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
        }

        .bin {
            width: 100px;
            height: 100px;
            border-radius: 5px 5px 0 0;
            text-align: center;
            font-weight: bold;
            color: white;
            position: relative;
            border: 2px solid #333;
        }

        /* Bin Colors (Matching standard waste types) */
        .recycle {
            background-color: #2196f3;
        }

        /* Blue */
        .organic {
            background-color: #4caf50;
        }

        /* Green */
        .general {
            background-color: #757575;
        }

        /* Grey */

        .bin-lid {
            position: absolute;
            top: -10px;
            left: -2px;
            width: 104px;
            height: 10px;
            background-color: inherit;
            border: 2px solid #333;
            border-radius: 5px 5px 0 0;
            transition: transform 0.3s ease-out;
            transform-origin: bottom center;
            z-index: 10;
        }

        .bin.open .bin-lid {
            transform: rotateX(-90deg);
            /* Opens the lid */
        }

        .bin p {
            padding: 0;
            margin-top: 10px;
            font-size: 0.9em;
        }

        /* Bottom Panel - Action Buttons */
        .action-panel {
            display: flex;
            justify-content: center;
            gap: 20px;
            padding: 10px 0;
        }

        .action-btn {
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        #btn-recycle {
            background-color: #2196f3;
            color: white;
        }

        #btn-organic {
            background-color: #4caf50;
            color: white;
        }

        #btn-general {
            background-color: #757575;
            color: white;
        }

        #btn-next {
            background-color: #ff9800;
            color: white;
        }

        /* Message Area */
        #message {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            height: 30px;
        }

        .correct {
            color: #4caf50;
        }

        .incorrect {
            color: #f44336;
        }

         .continue-btn {
      margin-top: clamp(20px, 4vh, 25px);
      background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
      color: #333;
      font-weight: bold;
      font-size: clamp(0.95rem, 2vw, 1.2rem);
      padding: clamp(12px, 2vw, 16px) clamp(30px, 5vw, 45px);
      border-radius: 15px;
      cursor: pointer;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      z-index: 10;
    }

    .continue-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.3);
      background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
    }

    .continue-btn:active {
      transform: translateY(-1px);
    }

    .continue-btn img {
      width: clamp(20px, 3vw, 28px);
      transition: all 0.3s ease;
    }

    .continue-btn:hover img {
      transform: translateX(5px);
    }
    </style>
</head>

<body>

    <!-- <h1>üóëÔ∏è Eco Warrior: Smart Dustbin Challenge üåü</h1> -->
    <h1>üóëÔ∏è Eco Warrior: Smart Dustbin using ultrasonic Sensor üåü</h1>
    <p class="subtitle">Use the Ultrasonic Sensor setting and sorting buttons to manage the waste stream!</p>

    <div class="top-nav">
        <img src="../../assets/icons/home.png" alt="Home" onclick="goHome()" title="Home" role="button">
        <img src="../../assets/icons/achievements.png" alt="Achievements" onclick="goAchievements()"
            title="Achievements" role="button">
        <img src="../../assets/icons/logout.png" alt="Go back" onclick="goBack()" title="Back" role="button">
    </div>

    <div class="game-container">
        <div class="top-panel">
            <div class="score-board">
                <h3>SCORE: <span id="score">0</span></h3>
                <p>Correct: <span id="correct-count">0</span> | Incorrect: <span id="incorrect-count">0</span></p>
                <p>Eco Status: <span id="eco-status">Beginner</span></p>
                <p>Combo: <span id="combo-count">0</span></p>
            </div>

            <div class="control-settings">
                <h3>PRACTICE: Sensor Threshold (<span id="threshold-value">50 cm</span>)</h3>
                <div class="slider-group">
                    <input type="range" min="10" max="100" value="50" id="threshold-slider">
                    <p style="font-size: 0.8em; padding: 5px 0 0 0;">(Adjusts the distance at which the lid *should*
                        open automatically)</p>
                </div>
            </div>
        </div>

        <div class="game-area">
            <div id="waste-stream">
            </div>

            <div class="bins-area">
                <div class="bin recycle" data-type="recycle" id="bin-recycle">
                    <div class="bin-lid"></div>
                    <p>RECYCLE</p>
                </div>
                <div class="bin organic" data-type="organic" id="bin-organic">
                    <div class="bin-lid"></div>
                    <p>ORGANIC</p>
                </div>
                <div class="bin general" data-type="general" id="bin-general">
                    <div class="bin-lid"></div>
                    <p>GENERAL</p>
                </div>
            </div>
        </div>

        <div id="message">Waiting for next item...</div>

        <div class="action-panel">
            <button class="action-btn" id="btn-recycle" onclick="sortWaste('recycle')">Open Recycle Bin</button>
            <button class="action-btn" id="btn-organic" onclick="sortWaste('organic')">Open Organic Bin</button>
            <button class="action-btn" id="btn-general" onclick="sortWaste('general')">Open General Bin</button>
            <button class="action-btn" id="btn-next" onclick="nextItem()">Next Item >> </button>
        </div>

        <button class="continue-btn" onclick="navigateToNext()">CONTINUE <img src="../../assets/icons/arrow.png" alt=""></button>

    </div>

    <script>
        // --- GAME DATA & STATE ---
        const WASTE_TYPES = [
            { type: 'recycle', label: 'ü•§', emoji: 'ü•§', color: '#2196f3' }, // Plastic Bottle
            { type: 'organic', label: 'üçé', emoji: 'üçé', color: '#4caf50' },  // Apple Core
            { type: 'general', label: 'üç¨', emoji: 'üç¨', color: '#757575' },  // Candy Wrapper
            { type: 'recycle', label: 'üì¶', emoji: 'üì¶', color: '#2196f3' }, // Cardboard Box
            { type: 'organic', label: 'üçå', emoji: 'üçå', color: '#4caf50' },  // Banana Peel
            { type: 'general', label: 'üóëÔ∏è', emoji: 'üóëÔ∏è', color: '#757575' }   // Dirty napkin
        ];

        let score = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let comboCount = 0;
        let thresholdDistance = 50; // cm
        let currentItem = null;
        let itemElement = null;
        let itemDistance = 200; // Starting virtual distance (off-screen)
        let gameSpeed = 30; // Milliseconds per move step
        let moveInterval = null;

        // --- DOM Elements ---
        const elements = {
            score: document.getElementById('score'),
            correct: document.getElementById('correct-count'),
            incorrect: document.getElementById('incorrect-count'),
            ecoStatus: document.getElementById('eco-status'),
            combo: document.getElementById('combo-count'),
            thresholdValue: document.getElementById('threshold-value'),
            thresholdSlider: document.getElementById('threshold-slider'),
            wasteStream: document.getElementById('waste-stream'),
            message: document.getElementById('message'),
            binRecycle: document.getElementById('bin-recycle'),
            binOrganic: document.getElementById('bin-organic'),
            binGeneral: document.getElementById('bin-general'),
        };

        // --- GAME LOGIC ---

        function updateScoreboard() {
            elements.score.textContent = score;
            elements.correct.textContent = correctCount;
            elements.incorrect.textContent = incorrectCount;
            elements.combo.textContent = comboCount;

            // Update Eco Warrior Status based on score
            let status = "Beginner";
            if (score > 100) status = "Apprentice";
            if (score > 300) status = "Master Sorter";
            if (score > 500) status = "Eco Warrior ‚≠ê";
            elements.ecoStatus.textContent = status;
        }

        function createItem() {
            // Get a random waste item
            currentItem = WASTE_TYPES[Math.floor(Math.random() * WASTE_TYPES.length)];
            itemDistance = 200; // Reset distance

            itemElement = document.createElement('div');
            itemElement.className = 'waste-item';
            itemElement.textContent = currentItem.emoji;
            itemElement.style.backgroundColor = currentItem.color;
            elements.wasteStream.appendChild(itemElement);

            // Start movement
            moveInterval = setInterval(moveItem, gameSpeed);
        }

        function moveItem() {
            // Simulate the item moving closer to the bin
            const step = 2; // Speed of the item
            itemDistance -= step;

            // Calculate pixel position (Game Area width is ~850px, Bins are on the left)
            const gameAreaWidth = elements.wasteStream.parentElement.clientWidth;
            // Map 200cm (off-screen right) to 850px and 0cm (bin) to 200px (to align with bins)
            const minX = 150;
            const maxX = gameAreaWidth - 50;
            const currentX = minX + (maxX - minX) * (itemDistance / 200);

            itemElement.style.right = `${itemDistance / 200 * (gameAreaWidth - 150)}px`;

            // Item missed the bin
            if (itemDistance < 0) {
                endItemRound("missed");
            }

            // Auto-open logic (Simulating Practice Mode Sensor)
            if (itemDistance <= thresholdDistance) {
                // In a real game, this is where the bin lid would automatically open
                // For this simulation, we'll just flash a message
                elements.message.textContent = `SENSOR ACTIVE at ${thresholdDistance} cm!`;
            }
        }

        // Navigation functions
        function goHome() {
            window.location.href = "../welcome.html";
        }

        function goAchievements() {
            window.location.href = "../page4.html";
        }

        function goBack() {
            window.location.href = "./C8E1.html";
        }

        function navigateToNext() {
            window.location.href = "C8E2.html";
        }

        function endItemRound(result, energyPenalty = 0) {
            clearInterval(moveInterval);
            itemElement.remove();
            currentItem = null;
            elements.message.textContent = "Waiting for next item...";

            if (result === "correct") {
                correctCount++;
                score += 10 + comboCount * 2 - energyPenalty;
                comboCount++;
                elements.message.className = 'correct';
                elements.message.textContent = `CORRECT! +${10 + comboCount * 2 - energyPenalty} points!`;
            } else if (result === "incorrect") {
                incorrectCount++;
                score = Math.max(0, score - 5);
                comboCount = 0; // Combo broken
                elements.message.className = 'incorrect';
                elements.message.textContent = `INCORRECT! -5 points. Combo Broken.`;
            } else if (result === "missed") {
                incorrectCount++;
                score = Math.max(0, score - 10);
                comboCount = 0;
                elements.message.className = 'incorrect';
                elements.message.textContent = `MISSED! -10 points. Too slow!`;
            }

            // Apply Combo Bonus Fun Element
            if (comboCount >= 5) {
                elements.message.textContent += " COMBO BONUS! üèÜ";
                elements.ecoStatus.style.color = '#ffc107'; // Gold color
            } else {
                elements.ecoStatus.style.color = '#d84315';
            }

            updateScoreboard();
        }

        // --- USER ACTIONS (Challenge Mode) ---

        function sortWaste(binType) {
            if (!currentItem) {
                elements.message.textContent = "No item to sort!";
                return;
            }

            // Only allow sorting if the item is close enough (e.g., within 20 cm)
            if (itemDistance > 20) {
                elements.message.className = 'incorrect';
                elements.message.textContent = "Too far! Wait until it's closer to the sensor.";
                return;
            }

            // Open the selected bin lid temporarily
            const binElement = document.getElementById(`bin-${binType}`);
            binElement.classList.add('open');
            setTimeout(() => binElement.classList.remove('open'), 500);


            // 1. Check if the sorting is correct
            const isCorrect = binType === currentItem.type;

            // 2. Check Energy Efficiency (Penalty for opening too early)
            let energyPenalty = 0;
            if (itemDistance > 10) { // If distance > 10cm, it's opened too early relative to the ideal throw point
                energyPenalty = Math.floor((itemDistance - 10) / 10); // 1 penalty per 10cm extra distance
            }

            if (isCorrect) {
                endItemRound("correct", energyPenalty);
            } else {
                endItemRound("incorrect");
            }
        }

        window.sortWaste = sortWaste; // Make function accessible from HTML buttons

        // --- INITIALIZATION ---

        function nextItem() {
            if (currentItem) return; // Wait for current item to finish

            // Reset bins visuals
            elements.binRecycle.classList.remove('open');
            elements.binOrganic.classList.remove('open');
            elements.binGeneral.classList.remove('open');

            createItem();
        }
        window.nextItem = nextItem;

        // Slider Event Listener for Practice Mode Feedback
        elements.thresholdSlider.addEventListener('input', (event) => {
            thresholdDistance = parseInt(event.target.value);
            elements.thresholdValue.textContent = `${thresholdDistance} cm`;
        });

        // Start the game by loading the first item
        updateScoreboard();
        createItem(); 
    </script>
</body>

</html>























<!-- 



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunlight Saver: The LDR Challenge</title>
    <style>
        /* General Setup */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ecf0f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        h1 { color: #f1c40f; margin-bottom: 5px; font-size: 2.2em; }
        p.subtitle { margin-bottom: 25px; font-size: 1.1em; color: #bdc3c7; }

        /* Game Container */
        .game-container {
            width: 90%;
            max-width: 700px;
            background-color: #34495e;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* --- Score & Light Status --- */
        .header-panel {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 2px solid #2ecc71;
        }
        #score-display {
            font-size: 2em;
            font-weight: bold;
            color: #f1c40f;
        }

        /* --- Light/Dark Cycle Visual --- */
        .cycle-area {
            text-align: center;
            padding: 20px 0;
            position: relative;
        }
        #light-meter {
            width: 100%;
            height: 30px;
            background: linear-gradient(to right, #000000 0%, #f1c40f 100%); /* Dark to Bright */
            border-radius: 5px;
            position: relative;
            margin-bottom: 15px;
        }
        #ldr-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #e74c3c; /* Indicator color */
            border: 3px solid white;
            transition: left 0.1s linear;
        }

        /* --- Street Light Visual --- */
        #street-light {
            width: 80px;
            height: 80px;
            margin: 20px auto;
            border-radius: 50%;
            background-color: #333; /* Off state */
            border: 5px solid #bdc3c7;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        #street-light.on {
            background-color: #f39c12; /* Yellow/Orange On state */
            box-shadow: 0 0 40px #f1c40f, 0 0 10px #f39c12;
        }
        #light-status {
            font-size: 1.2em;
            font-weight: bold;
            color: #e74c3c;
        }

        /* --- LDR Threshold Control --- */
        .control-panel {
            padding: 15px;
            background-color: #2c3e50;
            border-radius: 10px;
        }
        .control-panel h3 {
            color: #2ecc71;
            margin-bottom: 10px;
        }
        #threshold-slider {
            width: 100%;
            height: 10px;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
            background: #bdbdbd;
            border-radius: 5px;
        }
        #threshold-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #2ecc71; /* Green thumb */
            cursor: pointer;
            border: 3px solid white;
        }
        #threshold-line {
            position: absolute;
            top: 0;
            height: 100%;
            width: 3px;
            background-color: #2ecc71; /* Green line */
        }
    </style>
</head>
<body>

    <h1>üîÜ Sunlight Saver: The LDR Challenge üåÉ</h1>
    <p class="subtitle">Set the LDR threshold so the street light turns ON only when it's dark (Level 0).</p>

    <div class="game-container">
        <div class="header-panel">
            <div>Score: <span id="score-display">0</span></div>
            <div>Light Status: <span id="light-status">OFF</span></div>
        </div>

        <div class="cycle-area">
            <h3>Ambient Light Level: <span id="light-level-value">100</span> (Bright)</h3>
            
            <div id="light-meter">
                <div id="threshold-line"></div>
                <div id="ldr-indicator"></div>
            </div>

            <div id="street-light"></div>
        </div>

        <div class="control-panel">
            <h3>LDR Sensor Threshold: <span id="threshold-value">50</span></h3>
            <p style="font-size: 0.9em; padding: 5px 0;">(Light is ON when Ambient Light Level is **BELOW** this Threshold)</p>
            <input type="range" min="0" max="100" value="50" id="threshold-slider">
        </div>
        
        <div id="message" style="text-align: center; color: #3498db; font-weight: bold;">
            Adjust the green slider to optimize energy use!
        </div>
    </div>

    <script>
        // --- GAME DATA & STATE ---
        const GAME_SPEED = 50; // Milliseconds per update (20 updates/second)
        const METER_WIDTH = 700; // Reference width for meter calculations
        const LDR_MIN_VALUE = 0;
        const LDR_MAX_VALUE = 100;
        const LIGHT_CYCLE_DURATION = 10000; // 10 seconds per full day/night cycle
        
        let gameScore = 0;
        let ldrThreshold = 50;
        let ambientLightLevel = 100; // Starts bright
        let lightIsOn = false;

        // --- DOM Elements ---
        const elements = {
            scoreDisplay: document.getElementById('score-display'),
            lightStatus: document.getElementById('light-status'),
            lightLevelValue: document.getElementById('light-level-value'),
            ldrIndicator: document.getElementById('ldr-indicator'),
            streetLight: document.getElementById('street-light'),
            thresholdSlider: document.getElementById('threshold-slider'),
            thresholdValue: document.getElementById('threshold-value'),
            thresholdLine: document.getElementById('threshold-line'),
            lightMeter: document.getElementById('light-meter'),
        };

        // --- GAME LOGIC ---

        function updateLightLevel(timeElapsed) {
            // Simulate the day/night cycle (Sine wave from 100 (Bright) down to 0 (Dark) and back)
            // Range: 0 to 1
            const normalizedTime = (timeElapsed % LIGHT_CYCLE_DURATION) / LIGHT_CYCLE_DURATION;
            // Value: 0 to 100 (100 is max light)
            ambientLightLevel = Math.round(50 + 50 * Math.cos(normalizedTime * 2 * Math.PI));
            
            // 1. Update Indicator Position
            const meterWidth = elements.lightMeter.clientWidth;
            // Position maps 100 (bright/right) to 0 (dark/left)
            const indicatorPosition = meterWidth * (ambientLightLevel / LDR_MAX_VALUE);
            elements.ldrIndicator.style.left = `${indicatorPosition - 10}px`; // -10 to center the 20px indicator
            elements.lightLevelValue.textContent = `${ambientLightLevel} (${ambientLightLevel > 50 ? 'Bright' : 'Dark'})`;

            // 2. Check Light Logic (Actual IoT Simulation)
            const shouldTurnOn = ambientLightLevel < ldrThreshold;
            
            if (shouldTurnOn !== lightIsOn) {
                lightIsOn = shouldTurnOn;
                elements.streetLight.classList.toggle('on', lightIsOn);
                elements.lightStatus.textContent = lightIsOn ? "ON" : "OFF";
                elements.lightStatus.style.color = lightIsOn ? "#f1c40f" : "#e74c3c";
            }

            // 3. Update Score
            if (lightIsOn && ambientLightLevel < 40) {
                // Correct: Light ON when very dark
                gameScore += 1;
            } else if (!lightIsOn && ambientLightLevel > 60) {
                 // Correct: Light OFF when very bright
                gameScore += 1;
            } else if (lightIsOn && ambientLightLevel > 80) {
                // Incorrect: Light ON during bright day (Wasted Energy)
                gameScore -= 2;
            }

            elements.scoreDisplay.textContent = Math.max(0, gameScore); // Score cannot go below 0
        }

        function updateThresholdVisual() {
            // Position the green vertical line on the light meter
            const meterWidth = elements.lightMeter.clientWidth;
            const thresholdPosition = meterWidth * (1 - (ldrThreshold / LDR_MAX_VALUE));
            elements.thresholdLine.style.right = `${thresholdPosition}px`;
            elements.thresholdValue.textContent = ldrThreshold;
        }

        // --- Event Listeners ---
        elements.thresholdSlider.addEventListener('input', (event) => {
            ldrThreshold = parseInt(event.target.value);
            updateThresholdVisual();
        });

        // Use ResizeObserver to keep the threshold line correctly positioned on resize
        const resizeObserver = new ResizeObserver(() => {
            updateThresholdVisual();
        });
        resizeObserver.observe(elements.lightMeter);


        // --- Game Loop Initialization ---
        let startTime = Date.now();
        function gameLoop() {
            const timeElapsed = Date.now() - startTime;
            updateLightLevel(timeElapsed);
            requestAnimationFrame(gameLoop);
        }

        // Initialize and Start
        updateThresholdVisual();
        gameLoop(); 
    </script>
</body>
</html> -->






<!-- 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eco Sorter: Smart Dustbin Challenge</title>
    <style>
        /* General Setup */
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #004d40 0%, #00796b 100%);
            color: #ecf0f1;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        h1 { color: #ffc107; margin-bottom: 5px; font-size: 2.2em; }
        p.subtitle { margin-bottom: 25px; font-size: 1.1em; color: #b2dfdb; }

        /* Game Container */
        .game-container {
            width: 90%;
            max-width: 800px;
            background-color: #004d40;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* --- Score & Status --- */
        .header-panel {
            display: flex; justify-content: space-around; align-items: center; width: 100%; padding-bottom: 15px; border-bottom: 2px solid #b2dfdb;
        }
        .score-item { text-align: center; }
        .score-item h3 { color: #b2dfdb; font-size: 0.9em; margin-bottom: 5px; }
        .score-item span { font-size: 1.5em; font-weight: bold; color: #ffc107; }

        /* --- Game Area --- */
        .game-area {
            position: relative;
            height: 250px;
            border: 5px solid #4db6ac;
            border-radius: 10px;
            background-color: #00695c;
        }

        /* Waste Item Styling */
        .waste-item {
            position: absolute;
            top: 100px;
            right: 0; 
            width: 50px;
            height: 50px;
            border-radius: 5px;
            text-align: center;
            line-height: 50px;
            font-size: 30px;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
            transition: transform 0.1s ease;
            z-index: 20;
        }

        /* Bin Area */
        .bins-area {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            display: flex;
            justify-content: space-around;
            align-items: flex-end;
            z-index: 10;
        }

        .bin {
            width: 120px;
            height: 120px;
            border-radius: 8px 8px 0 0;
            text-align: center;
            font-weight: bold;
            color: white;
            border: 3px solid #333;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        /* Bin Colors */
        .recycle { background-color: #1976d2; } /* Blue */
        .organic { background-color: #388e3c; } /* Green */
        .general { background-color: #5d4037; } /* Brown/General */
        .bin p { padding: 5px 0; margin: 0; font-size: 1em; background-color: rgba(0, 0, 0, 0.2); }

        /* Message Area */
        #message {
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            height: 30px;
            color: #b2dfdb;
        }
        .correct { color: #81c784; }
        .incorrect { color: #ff8a65; }

        /* --- Action Buttons --- */
        .action-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            padding: 10px 0;
        }

        .action-btn {
            padding: 15px 15px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
            width: 30%;
        }

        .action-btn:hover { transform: translateY(-2px); }

        #btn-recycle { background-color: #1976d2; color: white; }
        #btn-organic { background-color: #388e3c; color: white; }
        #btn-general { background-color: #5d4037; color: white; }
    </style>
</head>
<body>

    <h1>‚ôªÔ∏è Eco Sorter: The Waste Challenge üöÆ</h1>
    <p class="subtitle">Match the waste item to the correct bin before it falls off the conveyor!</p>

    <div class="game-container">
        <div class="header-panel">
            <div class="score-item">
                <h3>SCORE</h3>
                <span id="score">0</span>
            </div>
            <div class="score-item">
                <h3>ACCURACY</h3>
                <span id="accuracy">N/A</span>
            </div>
            <div class="score-item">
                <h3>COMBO</h3>
                <span id="combo-count">0</span>
            </div>
        </div>

        <div class="game-area">
            <div id="waste-stream">
                </div>
            
            <div class="bins-area">
                <div class="bin recycle" data-type="recycle">
                    <p>RECYCLE (Blue)</p>
                </div>
                <div class="bin organic" data-type="organic">
                    <p>ORGANIC (Green)</p>
                </div>
                <div class="bin general" data-type="general">
                    <p>GENERAL (Brown)</p>
                </div>
            </div>
        </div>

        <div id="message">Click START to begin!</div>

        <div class="action-panel">
            <button class="action-btn" id="btn-recycle" onclick="sortWaste('recycle')" disabled>RECYCLE</button>
            <button class="action-btn" id="btn-organic" onclick="sortWaste('organic')" disabled>ORGANIC</button>
            <button class="action-btn" id="btn-general" onclick="sortWaste('general')" disabled>GENERAL</button>
        </div>
        
        <button id="start-btn" class="action-btn" style="background-color: #ffc107; color: #333;" onclick="startGame()">START CHALLENGE</button>

    </div>

    <script>
        // --- GAME DATA & STATE ---
        const WASTE_TYPES = [
            { type: 'recycle', emoji: 'ü•§', label: 'Bottle' },
            { type: 'organic', emoji: 'üçé', label: 'Core' },
            { type: 'general', emoji: 'üç¨', label: 'Wrapper' },
            { type: 'recycle', emoji: 'üì¶', label: 'Box' },
            { type: 'organic', emoji: 'üçå', label: 'Peel' },
            { type: 'general', emoji: 'üóëÔ∏è', label: 'Trash' },
            { type: 'recycle', emoji: 'üì∞', label: 'Paper' },
            { type: 'organic', emoji: 'ü•¶', label: 'Veggie' },
        ];
        
        const GAME_SPEED = 20; // Milliseconds per update
        const MOVEMENT_RATE = 2; // Pixels per update (speed)
        
        let gameState = 'ready';
        let score = 0;
        let totalAttempts = 0; 
        let correctCount = 0;
        let comboCount = 0;
        let itemX = 0; // Current position of the item from the right edge
        
        let currentItem = null;
        let itemElement = null;
        let moveInterval = null;

        // --- DOM Elements ---
        const elements = {
            score: document.getElementById('score'),
            accuracy: document.getElementById('accuracy'),
            combo: document.getElementById('combo-count'),
            wasteStream: document.getElementById('waste-stream'),
            message: document.getElementById('message'),
            startBtn: document.getElementById('start-btn'),
            actionBtns: document.querySelectorAll('.action-btn')
        };

        // --- CORE LOGIC ---

        function updateScoreboard() {
            elements.score.textContent = score;
            elements.combo.textContent = comboCount;
            
            if (totalAttempts > 0) {
                const accuracyValue = (correctCount / totalAttempts) * 100;
                elements.accuracy.textContent = `${accuracyValue.toFixed(0)}%`;
            } else {
                 elements.accuracy.textContent = `N/A`;
            }
        }

        function createItem() {
            currentItem = WASTE_TYPES[Math.floor(Math.random() * WASTE_TYPES.length)];
            itemX = 0; // Start at the right edge
            
            itemElement = document.createElement('div');
            itemElement.className = 'waste-item';
            itemElement.textContent = currentItem.emoji;
            elements.wasteStream.appendChild(itemElement);

            // Start movement loop
            if (moveInterval) clearInterval(moveInterval);
            moveInterval = setInterval(moveItem, GAME_SPEED);
            elements.message.textContent = `Sort the ${currentItem.label}!`;
            elements.message.className = '';
        }

        function moveItem() {
            itemX += MOVEMENT_RATE;
            const gameAreaWidth = elements.wasteStream.parentElement.clientWidth;
            
            itemElement.style.right = `${itemX}px`;
            
            // Check if item has been missed (passes the bin area, which is on the left)
            // Item is missed if its right edge position (itemX) exceeds the total width minus the bin area (approx 100px)
            if (itemX > gameAreaWidth - 100) {
                endRound("missed");
            }
        }

        function endRound(result) {
            clearInterval(moveInterval);
            if (itemElement) itemElement.remove();
            currentItem = null;
            totalAttempts++;
            
            if (result === "correct") {
                correctCount++;
                score += 10 + comboCount * 2;
                comboCount++;
                elements.message.className = 'correct';
                elements.message.textContent = `CORRECT! +${10 + comboCount * 2} points! ${comboCount >= 3 ? "üî•" : ""}`;
            } else {
                score = Math.max(0, score - 5);
                comboCount = 0; 
                elements.message.className = 'incorrect';
                elements.message.textContent = (result === "incorrect") 
                    ? `WRONG BIN! -5 points. ‚ùå` 
                    : `MISSED! -5 points. üí®`;
            }

            updateScoreboard();
            if (gameState === 'running') {
                setTimeout(createItem, 1000);
            }
        }

        // --- USER ACTION ---

        function sortWaste(binType) {
            if (gameState !== 'running' || !currentItem) {
                elements.message.textContent = "Click START or wait for the next item.";
                return;
            }

            // Check if item is close enough to be sorted (must be over the bins)
            const gameAreaWidth = elements.wasteStream.parentElement.clientWidth;
            // Item should be within the last 300px of the track (over the bins)
            const itemPositionThreshold = gameAreaWidth - 300; 

            if (itemX < itemPositionThreshold) {
                 elements.message.className = 'incorrect';
                 elements.message.textContent = "Too far! Wait for it to enter the bin area.";
                 return;
            }

            // Check if the sorting is correct
            const isCorrect = binType === currentItem.type;

            if (isCorrect) {
                endRound("correct");
            } else {
                endRound("incorrect");
            }
        }

        window.sortWaste = sortWaste; 

        // --- GAME CONTROL ---
        function startGame() {
            if (gameState === 'running') return;
            gameState = 'running';
            score = 0;
            totalAttempts = 0;
            correctCount = 0;
            comboCount = 0;
            elements.startBtn.style.display = 'none';
            
            // Enable action buttons
            elements.actionBtns.forEach(btn => btn.disabled = false);

            updateScoreboard();
            createItem();
        }
        window.startGame = startGame;
        
        // Initial setup
        elements.actionBtns.forEach(btn => btn.disabled = true);
    </script>
</body>
</html> -->