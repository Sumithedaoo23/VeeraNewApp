<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pollution Monitoring System</title>
  <style>
    body {
      font-family: 'Comic Sans MS', sans-serif;
      background-color: #e0f7fa;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: linear-gradient(to bottom, #5a8c1f, #cde09a);
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    header h2 {
      margin: 0;
      font-size: 24px;
    }

    .nav-icons {
      display: flex;
      gap: 15px;
    }

    .nav-icons a img {
      width: 30px;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .nav-icons a img:hover {
      transform: scale(1.2);
    }

    h1 {
      color: #00796b;
      margin: 30px 0 20px 0;
      font-size: 32px;
      text-align: center;
    }

    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      flex-grow: 1;
      position: relative;
    }

    .board-section {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 80px;
      margin-bottom: 80px;
      flex-wrap: wrap;
      position: relative;
    }

    .board-container {
      text-align: center;
      flex: 0 0 auto;
    }

    .board-container h2 {
      color: #00796b;
      font-size: 24px;
      margin-bottom: 15px;
    }

    .veera-kit {
      width: 320px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .connection-line {
      position: absolute;
      top: 50%;
      left: 47%;
      width: 180px;
      height: 3px;
      background: #00796b;
      transform: translateY(-50%);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 0.4;
      }

      50% {
        opacity: 1;
      }
    }

    .sensors-container {
      flex: 0 0 auto;
    }

    .sensors-section h2 {
      color: #00796b;
      font-size: 24px;
      text-align: center;
      margin-bottom: 25px;
    }

    .sensor-grid {
      display: flex;
      flex-direction: column;
      gap: 25px;
      max-width: 250px;
      align-items: center;
    }

    .sensor-box {
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: bold;
      padding: 20px 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transition: transform 0.3s, background-color 0.5s ease;
      min-height: 150px;
      width: 200px;
      position: relative;
    }

    .sensor-box::before {
      content: '';
      position: absolute;
      left: -50px;
      top: 50%;
      width: 40px;
      height: 3px;
      background: #00796b;
      transform: translateY(-50%);
      animation: pulse 2s infinite;
    }

    .sensor-box img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin-bottom: 10px;
      border-radius: 10px;
    }

    .sensor-box:hover {
      transform: translateY(-10px);
    }

    .sensor-name {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .readings {
      font-size: 20px;
      margin-top: 8px;
      background: rgba(255, 255, 255, 0.2);
      padding: 6px 12px;
      border-radius: 8px;
      transition: all 0.5s ease;
    }

    .sensor-co {
      background-color: #ff7f7f;
    }

    .sensor-so2 {
      background-color: #ffbf7f;
    }

    .sensor-pm {
      background-color: #8bc34a;
      color: #fff;
    }

    .sensor-box.danger.co {
      background-color: #ff3333 !important;
    }

    .sensor-box.danger.so2 {
      background-color: #ff8000 !important;
    }

    .sensor-box.danger.pm {
      background-color: #ffcc00 !important;
    }

    .guide-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      text-align: center;
      margin-top: auto;
      padding-bottom: 50px;
    }

    .speech-bubble {
      position: relative;
      background: #ffeb3b;
      border-radius: 15px;
      padding: 20px 25px;
      max-width: 650px;
      font-weight: bold;
      color: #333;
      font-size: 18px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      border: 2px solid #fbc02d;
    }

    .speech-bubble::before {
      content: '';
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%);
      border: 10px solid transparent;
      border-top-color: #ffeb3b;
    }

    .lion {
      width: 180px;
      animation: bounce 2s infinite alternate;
    }

    @keyframes bounce {
      0% {
        transform: translateY(0);
      }

      100% {
        transform: translateY(-10px);
      }
    }

    footer {
      background-color: #00796b;
      padding: 20px 0;
      text-align: center;
    }

    .next-btn {
      padding: 15px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      border-radius: 25px;
      background-color: #ffeb3b;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.3s;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    .next-btn:hover {
      background-color: #ffd700;
      transform: scale(1.05);
    }

    @media (max-width: 768px) {
      .board-section {
        flex-direction: column;
        gap: 30px;
      }

      .connection-line,
      .sensor-box::before {
        display: none;
      }

      .speech-bubble {
        max-width: 90%;
      }
    }
  </style>
</head>

<body>

  <header>
    <h2>Pollution Monitoring</h2>
    <div class="nav-icons">
      <a href="../page4.html"><img src="../../assets/icons/home.png" alt="Home"></a>
      <a href="#"><img src="../../assets/icons/logout.png" alt="Logout"></a>
      <a href="../page4.html"><img src="../../assets/icons/achievements.png" alt="Achievements"></a>
    </div>
  </header>

  <h1>üå´Ô∏è Pollution Monitoring System</h1>

  <div class="main-container">
    <div class="board-section">
      <div class="board-container">
        <h2>üìü Veera Kit Control Board</h2>
        <img src="../../assets/images/board.png" alt="Arduino/Veera Kit" class="veera-kit">
      </div>

      <div class="connection-line"></div>

      <div class="sensors-container">
        <div class="sensors-section">
          <h2>üî¨ Live Sensor Readings</h2>
          <div class="sensor-grid">
            <div class="sensor-box sensor-co">
              <img src="../../assets/images/gas_sensor.jpg" alt="CO Sensor">
              <div class="sensor-name">CO</div>
              <div class="readings" id="co">-- ppm</div>
            </div>

            <div class="sensor-box sensor-so2">
              <img src="../../assets/images/gas_sensor.jpg" alt="SO‚ÇÇ Sensor">
              <div class="sensor-name">SO‚ÇÇ</div>
              <div class="readings" id="so2">-- ppm</div>
            </div>

            <div class="sensor-box sensor-pm">
              <img src="../../assets/images/buzzer.png" alt="PM Sensor">
              <div class="sensor-name">PM</div>
              <div class="readings" id="pm">-- Œºg/m¬≥</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="guide-section">
      <div class="speech-bubble" id="lion-text"></div>
      <img src="../../assets/images/lion.gif" alt="Lion" class="lion">
    </div>
  </div>

  <footer>
    <button class="next-btn" onclick="window.location.href='C6E4.html'">‚û° next</button>
  </footer>

  <script>
    const fullText = `Hey eco-warrior! üåç
Look around ‚Äî clean air keeps us healthy and the planet happy.
In this experiment, your Veera Kit uses a gas sensor to check how clean or polluted the air is.
The more smoke or harmful gases it finds, the higher the pollution level.
This is how cities track air quality every day!
So, are you ready to become a Pollution Patrol Officer and save the sky? ‚òÅÔ∏èüí®`;

    const lionText = document.getElementById('lion-text');
    let index = 0;

    function typeWriter() {
      if (index < fullText.length) {
        lionText.textContent += fullText.charAt(index);
        index++;
        setTimeout(typeWriter, 35);
      }
    }

    typeWriter();

    // --- Sensor Simulation ---
    const fallbackValues = {
      co: { value: 0.5, unit: ' ppm', threshold: 1 },
      so2: { value: 0.01, unit: ' ppm', threshold: 0.03 },
      pm: { value: 35, unit: ' Œºg/m¬≥', threshold: 50 }
    };

    function updateSensorReading(id) {
      const element = document.getElementById(id);
      const box = element.parentElement;
      const config = fallbackValues[id];
      const variation = (Math.random() - 0.5) * 0.3;
      const sensorValue = config.value * (1 + variation);

      element.textContent = sensorValue.toFixed(2) + config.unit;

      box.classList.remove('danger', 'co', 'so2', 'pm');
      if (sensorValue > config.threshold) {
        box.classList.add('danger', id);
      }
    }

    setInterval(() => {
      updateSensorReading('co');
      updateSensorReading('so2');
      updateSensorReading('pm');
    }, 2000);
  </script>

  <script src="SerialManager.js"></script>
  <script src="./backend/experimentControls.js"></script>
  <script src="../backend/renderer.js"></script>

</body>

</html>
